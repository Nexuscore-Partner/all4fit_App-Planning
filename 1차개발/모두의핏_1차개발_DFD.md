# 모두의 핏 1차 개발 DFD (Data Flow Diagram)

## 📊 Level 0 DFD - 전체 시스템 개요

```
                    ┌─────────────────────────────────────┐
                    │           모두의 핏 시스템             │
                    │         (1차 개발 범위)               │
                    └─────────────────────────────────────┘
                                     │
                    ┌────────────────┼────────────────┐
                    │                │                │
            ┌───────▼───────┐ ┌─────▼─────┐ ┌───────▼───────┐
            │  일반 사용자   │ │ 시설운영자  │ │    지도자     │
            │              │ │           │ │              │
            └──────────────┘ └───────────┘ └──────────────┘
                    │                │                │
            ┌───────▼───────┐ ┌─────▼─────┐ ┌───────▼───────┐
            │ 시설 조회/리뷰 │ │ 시설 관리  │ │ 문의 답변     │
            │ 즐겨찾기/문의  │ │ 리뷰 관리  │ │ 프로필 관리   │
            │ 커뮤니티      │ │ 고객 관리  │ │ 답변 관리     │
            └──────────────┘ └───────────┘ └──────────────┘
                    │                │                │
                    └────────────────┼────────────────┘
                                    │
                            ┌───────▼───────┐
                            │    관리자     │
                            │              │
                            │ 사용자 관리   │
                            │ 콘텐츠 관리   │
                            │ 시스템 관리   │
                            │ 분석/리포트   │
                            └──────────────┘
```

## 📊 Level 1 DFD - 주요 프로세스

### 1. 사용자 인증 시스템
```
┌─────────────┐    로그인 요청    ┌─────────────────┐    인증 결과    ┌─────────────┐
│   사용자    │ ──────────────→ │  인증 시스템    │ ──────────────→ │   사용자    │
└─────────────┘                 │                │                 └─────────────┘
                                │ • 이메일 로그인  │
                                │ • 전화번호 로그인│
                                │ • 소셜 로그인   │
                                │ • 회원가입     │
                                └─────────────────┘
```

### 2. 시설 관리 시스템
```
┌─────────────┐    시설 조회 요청  ┌─────────────────┐    시설 정보    ┌─────────────┐
│   사용자    │ ──────────────→ │  시설 관리 시스템│ ──────────────→ │   사용자    │
└─────────────┘                 │                │                 └─────────────┘
                                │ • 시설 검색     │
                                │ • 시설 상세     │
                                │ • 위치 기반     │
                                │ • 필터링       │
                                └─────────────────┘
                                        │
                                ┌───────▼───────┐
                                │  시설 운영자  │
                                │              │
                                │ • 시설 등록   │
                                │ • 시설 수정   │
                                │ • 시설 관리   │
                                └──────────────┘
```

### 3. 리뷰 시스템
```
┌─────────────┐    리뷰 작성     ┌─────────────────┐    리뷰 등록    ┌─────────────┐
│   사용자    │ ──────────────→ │   리뷰 시스템   │ ──────────────→ │   사용자    │
└─────────────┘                 │                │                 └─────────────┘
                                │ • 리뷰 작성     │
                                │ • 리뷰 조회     │
                                │ • 리뷰 수정     │
                                │ • 리뷰 삭제     │
                                └─────────────────┘
                                        │
                                ┌───────▼───────┐
                                │  시설 운영자  │
                                │              │
                                │ • 리뷰 답글   │
                                │ • 리뷰 신고   │
                                │ • 리뷰 관리   │
                                └──────────────┘
```

### 4. 문의 시스템
```
┌─────────────┐    문의 작성     ┌─────────────────┐    문의 접수    ┌─────────────┐
│   사용자    │ ──────────────→ │   문의 시스템   │ ──────────────→ │   사용자    │
└─────────────┘                 │                │                 └─────────────┘
                                │ • 1:1 문의     │
                                │ • 문의 내역     │
                                │ • FAQ 조회     │
                                │ • 신고하기     │
                                └─────────────────┘
                                        │
                                ┌───────▼───────┐
                                │    지도자     │
                                │              │
                                │ • 문의 답변   │
                                │ • 답변 관리   │
                                │ • 답변 통계   │
                                └──────────────┘
```

### 5. 커뮤니티 시스템
```
┌─────────────┐    채팅 메시지   ┌─────────────────┐    실시간 메시지 ┌─────────────┐
│   사용자    │ ──────────────→ │  커뮤니티 시스템│ ──────────────→ │   사용자    │
└─────────────┘                 │                │                 └─────────────┘
                                │ • 전체 채팅방   │
                                │ • 실시간 채팅   │
                                │ • 디스코드 연동 │
                                └─────────────────┘
```

## 📊 Level 2 DFD - 상세 프로세스

### 1. 사용자 인증 상세 프로세스
```
                    ┌─────────────────────────────────────┐
                    │         사용자 인증 시스템          │
                    └─────────────────────────────────────┘
                                    │
                    ┌────────────────┼────────────────┐
                    │                │                │
            ┌───────▼───────┐ ┌─────▼─────┐ ┌───────▼───────┐
            │   로그인      │ │  회원가입  │ │  비밀번호 찾기 │
            │              │ │           │ │              │
            │ • 이메일     │ │ • 타입 선택│ │ • 이메일/SMS  │
            │ • 전화번호   │ │ • 기본정보 │ │ • 인증코드    │
            │ • 소셜      │ │ • 위치설정 │ │ • 재설정      │
            └──────────────┘ └───────────┘ └──────────────┘
                    │                │                │
                    └────────────────┼────────────────┘
                                    │
                            ┌───────▼───────┐
                            │   인증 처리   │
                            │              │
                            │ • 인증 검증   │
                            │ • 권한 부여   │
                            │ • 세션 관리   │
                            └──────────────┘
```

### 2. 시설 관리 상세 프로세스
```
                    ┌─────────────────────────────────────┐
                    │         시설 관리 시스템            │
                    └─────────────────────────────────────┘
                                    │
                    ┌────────────────┼────────────────┐
                    │                │                │
            ┌───────▼───────┐ ┌─────▼─────┐ ┌───────▼───────┐
            │   시설 조회   │ │ 시설 등록  │ │  시설 수정    │
            │              │ │           │ │              │
            │ • 검색       │ │ • 기본정보 │ │ • 정보 수정   │
            │ • 필터링     │ │ • 사진업로드│ │ • 사진 관리   │
            │ • 정렬       │ │ • 운영시간 │ │ • 운영시간    │
            │ • 지도뷰     │ │ • 요금설정 │ │ • 요금설정    │
            └──────────────┘ └───────────┘ └──────────────┘
                    │                │                │
                    └────────────────┼────────────────┘
                                    │
                            ┌───────▼───────┐
                            │   시설 데이터  │
                            │              │
                            │ • 시설 정보   │
                            │ • 위치 정보   │
                            │ • 운영 정보   │
                            └──────────────┘
```

### 3. 리뷰 관리 상세 프로세스
```
                    ┌─────────────────────────────────────┐
                    │         리뷰 관리 시스템            │
                    └─────────────────────────────────────┘
                                    │
                    ┌────────────────┼────────────────┐
                    │                │                │
            ┌───────▼───────┐ ┌─────▼─────┐ ┌───────▼───────┐
            │   리뷰 작성   │ │  리뷰 조회  │ │  리뷰 관리    │
            │              │ │           │ │              │
            │ • 리뷰 작성  │ │ • 리뷰 목록│ │ • 답글 작성   │
            │ • 평점 입력  │ │ • 리뷰 상세│ │ • 신고 처리   │
            │ • 사진 첨부  │ │ • 필터링   │ │ • 통계 관리   │
            └──────────────┘ └───────────┘ └──────────────┘
                    │                │                │
                    └────────────────┼────────────────┘
                                    │
                            ┌───────▼───────┐
                            │   리뷰 데이터  │
                            │              │
                            │ • 리뷰 내용   │
                            │ • 평점 정보   │
                            │ • 답글 정보   │
                            └──────────────┘
```

### 4. 문의 관리 상세 프로세스
```
                    ┌─────────────────────────────────────┐
                    │         문의 관리 시스템            │
                    └─────────────────────────────────────┘
                                    │
                    ┌────────────────┼────────────────┐
                    │                │                │
            ┌───────▼───────┐ ┌─────▼─────┐ ┌───────▼───────┐
            │   문의 작성   │ │  문의 조회  │ │  문의 답변    │
            │              │ │           │ │              │
            │ • 1:1 문의   │ │ • 문의 목록│ │ • 답변 작성   │
            │ • 문의 내용  │ │ • 문의 상세│ │ • 답변 수정   │
            │ • 첨부파일   │ │ • 상태 확인│ │ • 답변 삭제   │
            └──────────────┘ └───────────┘ └──────────────┘
                    │                │                │
                    └────────────────┼────────────────┘
                                    │
                            ┌───────▼───────┐
                            │   문의 데이터  │
                            │              │
                            │ • 문의 내용   │
                            │ • 답변 내용   │
                            │ • 상태 정보   │
                            └──────────────┘
```

## 📊 데이터 저장소 (Data Store)

### 1. 사용자 데이터
```
┌─────────────────────────────────────┐
│           사용자 데이터베이스        │
├─────────────────────────────────────┤
│ • 사용자 기본정보                   │
│ • 인증 정보                        │
│ • 프로필 정보                      │
│ • 권한 정보                        │
│ • 활동 이력                        │
└─────────────────────────────────────┘
```

### 2. 시설 데이터
```
┌─────────────────────────────────────┐
│           시설 데이터베이스          │
├─────────────────────────────────────┤
│ • 시설 기본정보                     │
│ • 위치 정보                        │
│ • 운영 정보                        │
│ • 요금 정보                        │
│ • 편의시설 정보                    │
└─────────────────────────────────────┘
```

### 3. 리뷰 데이터
```
┌─────────────────────────────────────┐
│           리뷰 데이터베이스          │
├─────────────────────────────────────┤
│ • 리뷰 내용                        │
│ • 평점 정보                        │
│ • 답글 정보                        │
│ • 신고 정보                        │
│ • 통계 정보                        │
└─────────────────────────────────────┘
```

### 4. 문의 데이터
```
┌─────────────────────────────────────┐
│           문의 데이터베이스          │
├─────────────────────────────────────┤
│ • 문의 내용                        │
│ • 답변 내용                        │
│ • 상태 정보                        │
│ • 첨부파일                        │
│ • 통계 정보                        │
└─────────────────────────────────────┘
```

### 5. 커뮤니티 데이터
```
┌─────────────────────────────────────┐
│          커뮤니티 데이터베이스        │
├─────────────────────────────────────┤
│ • 채팅 메시지                      │
│ • 사용자 활동                      │
│ • 디스코드 연동 정보               │
│ • 알림 정보                        │
└─────────────────────────────────────┘
```

## 📊 외부 엔티티 (External Entities)

### 1. 사용자
- 일반 사용자
- 시설 운영자
- 지도자
- 관리자

### 2. 외부 시스템
- 카카오 로그인 API
- 구글 로그인 API
- 네이버 지도 API
- 카카오 지도 API
- 디스코드 API
- SMS 발송 서비스
- 이메일 발송 서비스

## 📊 데이터 흐름 (Data Flow)

### 1. 사용자 인증 흐름
```
사용자 → 로그인 요청 → 인증 시스템 → 인증 결과 → 사용자
사용자 → 회원가입 요청 → 인증 시스템 → 가입 완료 → 사용자
```

### 2. 시설 조회 흐름
```
사용자 → 시설 조회 요청 → 시설 관리 시스템 → 시설 정보 → 사용자
시설 운영자 → 시설 등록 → 시설 관리 시스템 → 등록 완료 → 시설 운영자
```

### 3. 리뷰 관리 흐름
```
사용자 → 리뷰 작성 → 리뷰 시스템 → 리뷰 등록 → 사용자
시설 운영자 → 리뷰 답글 → 리뷰 시스템 → 답글 등록 → 시설 운영자
```

### 4. 문의 관리 흐름
```
사용자 → 문의 작성 → 문의 시스템 → 문의 접수 → 사용자
지도자 → 문의 답변 → 문의 시스템 → 답변 등록 → 지도자
```

## 📊 시스템 경계 (System Boundary)

### 포함된 기능
- 사용자 인증 및 관리
- 시설 조회 및 관리
- 리뷰 작성 및 관리
- 문의 작성 및 답변
- 커뮤니티 기능
- 즐겨찾기 관리
- 알림 시스템

### 제외된 기능 (2차 개발)
- 시설 예약 시스템
- 결제 시스템
- 지도자 레슨 관리
- 고급 분석 도구
- 자동화 시스템

## 📊 보안 및 권한 관리

### 1. 인증 레벨
- Level 0: 비로그인 사용자
- Level 1: 일반 사용자
- Level 2: 시설 운영자
- Level 3: 지도자
- Level 4: 관리자

### 2. 데이터 접근 권한
- 읽기 전용: 시설 조회, 리뷰 조회
- 읽기/쓰기: 프로필 관리, 리뷰 작성
- 관리자 권한: 시설 관리, 문의 답변
- 시스템 권한: 사용자 관리, 시스템 설정

이 DFD는 모두의 핏 1차 개발 범위에 맞춰 설계되었으며, 각 프로세스와 데이터 흐름이 명확하게 정의되어 있습니다.
