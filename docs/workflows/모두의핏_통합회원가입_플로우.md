# 모두의 핏 - 통합 회원가입 플로우

## 전체 회원가입 플로우 다이어그램

```mermaid
flowchart TD
    %% 시작점
    Start[앱 실행] --> LoginCheck{로그인 상태?}
    LoginCheck -->|로그인됨| MainApp[메인 앱]
    LoginCheck -->|비로그인| SignupStart[회원가입 시작]
    
    %% 회원가입 타입 선택
    SignupStart --> UserTypeSelect[사용자 타입 선택]
    UserTypeSelect --> GeneralUser[일반 사용자]
    UserTypeSelect --> TrainerUser[지도자]
    UserTypeSelect --> OperatorUser[시설 운영자]
    
    %% 일반 사용자 회원가입
    GeneralUser --> GeneralForm[기본 정보 입력]
    GeneralForm --> InterestSelect[관심 종목 선택]
    InterestSelect --> TermsAgree1[약관 동의]
    TermsAgree1 --> GeneralComplete[일반 사용자 가입 완료]
    GeneralComplete --> MainApp
    
    %% 지도자 회원가입
    TrainerUser --> TrainerForm[지도자 기본 정보]
    TrainerForm --> TrainerProfile[지도자 프로필 작성]
    TrainerProfile --> TrainerCert[자격증/경력 업로드]
    TrainerCert --> TrainerIntro[소개글 작성]
    TrainerIntro --> TrainerTerms[약관 동의]
    TrainerTerms --> TrainerSubmit[지도자 신청 제출]
    TrainerSubmit --> TrainerPending[승인 대기 상태]
    
    %% 시설 운영자 회원가입
    OperatorUser --> OperatorForm[운영자 기본 정보]
    OperatorForm --> FacilityInfo[시설 정보 입력]
    FacilityInfo --> BusinessDoc[사업자 등록증 업로드]
    BusinessDoc --> AdditionalDoc[추가 증빙 서류]
    AdditionalDoc --> OperatorTerms[약관 동의]
    OperatorTerms --> OperatorSubmit[운영자 신청 제출]
    OperatorSubmit --> OperatorPending[승인 대기 상태]
    
    %% 관리자 승인 프로세스
    TrainerPending --> AdminReview1[관리자 검토]
    OperatorPending --> AdminReview2[관리자 검토]
    
    AdminReview1 --> TrainerDecision{승인 여부}
    AdminReview2 --> OperatorDecision{승인 여부}
    
    %% 지도자 승인 결과
    TrainerDecision -->|승인| TrainerApproved[지도자 승인 완료]
    TrainerDecision -->|반려| TrainerRejected[반려 - 수정 요청]
    TrainerApproved --> TrainerActive[지도자 기능 활성화]
    TrainerRejected --> TrainerForm
    TrainerActive --> MainApp
    
    %% 시설 운영자 승인 결과
    OperatorDecision -->|승인| OperatorApproved[운영자 승인 완료]
    OperatorDecision -->|반려| OperatorRejected[반려 - 수정 요청]
    OperatorApproved --> FacilityActive[시설 등록 및 관리 권한]
    OperatorRejected --> OperatorForm
    FacilityActive --> MainApp
    
    %% 알림 시스템
    TrainerPending --> NotifyTrainer[지도자 신청 알림]
    OperatorPending --> NotifyOperator[운영자 신청 알림]
    TrainerApproved --> NotifyTrainerSuccess[승인 완료 알림]
    OperatorApproved --> NotifyOperatorSuccess[승인 완료 알림]
    
    %% 스타일 정의
    classDef userType fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef success fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef pending fill:#fff8e1,stroke:#f57c00,stroke-width:2px
    classDef error fill:#ffebee,stroke:#c62828,stroke-width:2px
    
    class GeneralUser,TrainerUser,OperatorUser userType
    class TrainerForm,OperatorForm,FacilityInfo,BusinessDoc process
    class TrainerDecision,OperatorDecision decision
    class TrainerApproved,OperatorApproved,GeneralComplete success
    class TrainerPending,OperatorPending pending
    class TrainerRejected,OperatorRejected error
```

## 세부 프로세스별 플로우

### 1. 지도자 회원가입 상세 플로우

```mermaid
flowchart TD
    A[지도자 선택] --> B[기본 정보 입력]
    B --> C[전문 분야 선택]
    C --> D[경력 입력]
    D --> E[자격증 업로드]
    E --> F[포트폴리오 업로드]
    F --> G[소개글 작성]
    G --> H[레슨 가능 지역 설정]
    H --> I[레슨 요금 설정]
    I --> J[가능 시간대 설정]
    J --> K[약관 동의]
    K --> L[신청서 제출]
    L --> M[관리자 검토 대기]
    
    M --> N{검토 결과}
    N -->|승인| O[지도자 계정 활성화]
    N -->|보완 요청| P[보완 사항 안내]
    N -->|반려| Q[반려 사유 안내]
    
    P --> B
    Q --> R[재신청 가능 안내]
    O --> S[지도자 대시보드 접근]
```

### 2. 시설 운영자 회원가입 상세 플로우

```mermaid
flowchart TD
    A[시설 운영자 선택] --> B[기본 정보 입력]
    B --> C[시설 기본 정보]
    C --> D[시설 주소 및 위치]
    D --> E[시설 유형 선택]
    E --> F[운영 시간 설정]
    F --> G[시설 사진 업로드]
    G --> H[사업자 등록증 업로드]
    H --> I[대표자 신분증 업로드]
    I --> J[시설 관련 허가서]
    J --> K[약관 동의]
    K --> L[신청서 제출]
    L --> M[관리자 검토 대기]
    
    M --> N{서류 검증}
    N -->|통과| O{현장 확인 필요?}
    N -->|서류 보완| P[서류 보완 요청]
    
    O -->|필요| Q[현장 확인 일정 조율]
    O -->|불필요| R[최종 승인]
    
    Q --> S{현장 확인 결과}
    S -->|적합| R
    S -->|부적합| T[현장 개선 요청]
    
    P --> H
    T --> U[개선 완료 후 재신청]
    R --> V[시설 운영자 계정 활성화]
    V --> W[시설 관리 대시보드 접근]
```

### 3. 관리자 검토 프로세스

```mermaid
flowchart TD
    A[신청서 접수] --> B[검토 대기 큐]
    B --> C[담당자 배정]
    C --> D[1차 서류 검토]
    
    D --> E{서류 완성도}
    E -->|완료| F[신원 확인]
    E -->|미완료| G[보완 요청]
    
    F --> H{자격 요건 충족}
    H -->|충족| I[2차 심사]
    H -->|미충족| J[반려 처리]
    
    I --> K{최종 승인 여부}
    K -->|승인| L[계정 활성화]
    K -->|조건부 승인| M[조건 안내]
    K -->|반려| N[반려 사유 안내]
    
    G --> O[수정 요청 발송]
    M --> P[조건 이행 확인]
    P --> L
    
    L --> Q[승인 완료 알림]
    N --> R[반려 안내 발송]
    J --> R
```

## 화면별 입력 항목

### 지도자 회원가입 필수 항목
- **기본 정보**: 이름, 연락처, 이메일, 주소
- **전문 분야**: 운동 종목, 세부 전문 분야
- **경력 사항**: 경력 년수, 주요 경력, 수상 이력
- **자격증**: 자격증명, 발급기관, 취득일자, 증명서 파일
- **포트폴리오**: 프로필 사진, 활동 사진, 영상
- **서비스 정보**: 레슨 지역, 요금, 가능 시간대
- **소개글**: 자기소개, 레슨 스타일, 특기사항

### 시설 운영자 회원가입 필수 항목
- **기본 정보**: 대표자명, 연락처, 이메일
- **사업자 정보**: 사업자등록번호, 사업장명, 사업자등록증
- **시설 정보**: 시설명, 주소, 좌표, 시설 유형
- **운영 정보**: 운영시간, 휴무일, 연락처
- **시설 현황**: 시설 사진, 편의시설, 장비 현황
- **증빙 서류**: 영업신고증, 안전관리증명서, 보험증서
- **약관 동의**: 운영정책, 수수료 정책, 환불정책

## 상태 관리

```mermaid
stateDiagram-v2
    [*] --> 신청접수
    신청접수 --> 검토중
    검토중 --> 보완요청
    검토중 --> 승인완료
    검토중 --> 반려
    보완요청 --> 검토중
    승인완료 --> 활성화
    반려 --> [*]
    활성화 --> [*]
```

이 플로우를 통해 일반 사용자, 지도자, 시설 운영자 모두의 회원가입 프로세스가 체계적으로 관리될 수 있습니다.
