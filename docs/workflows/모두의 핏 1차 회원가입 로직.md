
flowchart TD
    %% ============= 앱 시작 및 인증 =============
    Start([모두의 핏 앱 시작]) --> AuthCheck{로그인 상태?}
    AuthCheck -->|비로그인| LoginScreen[로그인 화면]
    AuthCheck -->|로그인됨| MainApp[메인 앱]
    
    %% ============= 로그인 옵션들 =============
    LoginScreen --> EmailLogin[이메일 로그인]
    LoginScreen --> PhoneLogin[전화번호 로그인]
    LoginScreen --> SocialLogin[소셜 로그인<br/>구글/카카오/네이버]
    LoginScreen --> SignupChoice[회원가입 선택]
    
    EmailLogin --> LoginValidation{로그인 검증}
    PhoneLogin --> LoginValidation
    SocialLogin --> LoginValidation
    LoginValidation -->|성공| MainApp
    LoginValidation -->|실패| LoginError[로그인 실패] --> LoginScreen
    
    %% ============= 회원가입 프로세스 =============
    SignupChoice --> UserTypeSelect[사용자 타입 선택]
    UserTypeSelect --> GeneralSignup[일반 사용자]
    UserTypeSelect --> TrainerSignup[지도자 신청]
    UserTypeSelect --> OperatorSignup[시설 운영자 신청]
    
    %% === 일반 사용자 회원가입 ===
    GeneralSignup --> GenBasicInfo[기본정보 입력<br/>이름/연락처/이메일]
    GenBasicInfo --> GenLocation[활동지역 설정<br/>GPS 기반]
    GenLocation --> GenTerms[약관동의]
    GenTerms --> GenComplete[일반 사용자<br/>가입 완료]
    GenComplete --> MainApp
    
    %% === 지도자 회원가입 ===
    TrainerSignup --> TrainerBasic[지도자 기본정보<br/>이름/연락처/전문종목]
    TrainerBasic --> TrainerCert[자격증 업로드<br/>생활체육지도자 등]
    TrainerCert --> TrainerPortfolio[포트폴리오 작성<br/>프로필/활동사진/소개글]
    TrainerPortfolio --> TrainerService[서비스 정보 설정<br/>레슨요금/활동지역/시간대]
    TrainerService --> TrainerSubmit[지도자 신청 제출]
    TrainerSubmit --> TrainerWaiting[검토 대기]
    
    %% === 시설 운영자 회원가입 ===
    OperatorSignup --> OperatorBasic[운영자 기본정보<br/>대표자명/사업자번호]
    OperatorBasic --> FacilityInfo[시설 정보 입력<br/>시설명/주소/유형]
    FacilityInfo --> FacilitySchedule[운영시간 설정<br/>요일별 운영시간]
    FacilitySchedule --> FacilityDocs[증빙서류 업로드<br/>사업자등록증/시설사진]
    FacilityDocs --> OperatorSubmit[운영자 신청 제출]
    OperatorSubmit --> OperatorWaiting[검토 대기]
    
    %% ============= 관리자 검토 프로세스 =============
    TrainerWaiting --> AdminQueue[관리자 검토 큐]
    OperatorWaiting --> AdminQueue
    
    AdminQueue --> TrainerReview[지도자 검토<br/>서류/자격/신원 확인]
    AdminQueue --> OperatorReview[운영자 검토<br/>사업자/시설/현장 확인]
    
    TrainerReview --> TrainerDecision{지도자 승인?}
    OperatorReview --> OperatorDecision{운영자 승인?}
    
    TrainerDecision -->|승인| TrainerApproved[지도자 승인<br/>계정 활성화]
    TrainerDecision -->|반려| TrainerRejected[반려 - 수정 요청] --> TrainerBasic
    
    OperatorDecision -->|승인| OperatorApproved[운영자 승인<br/>시설 등록 완료]
    OperatorDecision -->|반려| OperatorRejected[반려 - 서류 보완] --> OperatorBasic
    
    TrainerApproved --> MainApp
    OperatorApproved --> MainApp
    
    %% ============= 메인 앱 4개 탭 =============
    MainApp --> HomeTab[홈 탭]
    MainApp --> FacilityTab[운동시설 탭]
    MainApp --> CommunityTab[커뮤니티 탭]
    MainApp --> MyPageTab[마이페이지 탭]
    
    
    %% ============= 마이페이지 탭 기능들 =============
    MyPageTab --> ProfileManagement[프로필 관리<br/>정보수정]
    MyPageTab --> CustomerSupport[고객 지원<br/>1:1문의/FAQ/신고]
    MyPageTab --> Settings[설정<br/>알림/개인정보/약관]
    

    %% ============= 알림 시스템 =============
    MainApp --> NotificationSystem[통합 알림 시스템]
    NotificationSystem --> PushNotifications[푸시 알림<br/>/커뮤니티]
    NotificationSystem --> InAppNotifications[인앱 알림<br/>실시간 메시지/공지]
    NotificationSystem --> EmailSMSNotifications[이메일/SMS 알림<br/>중요안내/보안/마케팅]
    
    %% ============= 관리자 시스템 =============
    AdminQueue --> AdminDashboard[관리자 대시보드]
    AdminDashboard --> UserManagement[사용자 관리<br/>회원정보/권한/제재]
    AdminDashboard --> FacilityManagement[시설 관리<br/>승인/수정/모니터링]
    AdminDashboard --> TrainerManagement[지도자 관리<br/>승인/검증/성과]
    AdminDashboard --> ContentModeration[콘텐츠 관리<br/>신고처리/커뮤니티/리뷰]
    AdminDashboard --> AnalyticsReports[분석 및 리포트<br/>통계/매출/성과지표]
    
    %% ============= 스타일 정의 =============
    classDef startEnd fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef generalUser fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef trainer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef operator fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef admin fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef mainFeature fill:#e0f2f1,stroke:#00796b,stroke-width:2px
    classDef notification fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef error fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef success fill:#e8f5e8,stroke:#388e3c,stroke-width:3px
    
    %% ============= 클래스 적용 =============
    class Start,MainApp startEnd
    class AuthCheck,LoginValidation,TrainerDecision,OperatorDecision decision
    class GeneralSignup,GenBasicInfo,GenInterests,GenLocation,GenTerms,GenComplete generalUser
    class TrainerSignup,TrainerBasic,TrainerCert,TrainerPortfolio,TrainerService,TrainerSubmit,TrainerWaiting,TrainerReview,TrainerApproved trainer
    class OperatorSignup,OperatorBasic,FacilityInfo,FacilitySchedule,FacilityDocs,OperatorSubmit,OperatorWaiting,OperatorReview,OperatorApproved operator
    class AdminQueue,AdminDashboard,UserManagement,FacilityManagement,TrainerManagement,ContentModeration,AnalyticsReports admin
    class HomeTab,FacilityTab,CommunityTab,MyPageTab,LocationSearch,TrainerMatching,FacilitySearch,CommunitySearch,ProfileManagement mainFeature
    class NotificationSystem,PushNotifications,InAppNotifications,EmailSMSNotifications notification
    class LoginError,TrainerRejected,OperatorRejected error
    class MatchingComplete,ReservationComplete,CommunityManagement success


    